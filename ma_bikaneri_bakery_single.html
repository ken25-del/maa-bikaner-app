<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>मां बीकानेरी बेकरी </title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/lucide@0.263.1/dist/umd/lucide.js" rel="stylesheet" />
<link rel="stylesheet" href="style.css" />

<!-- <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
  font-family: 'Noto Sans Devanagari', sans-serif; 
  background: linear-gradient(135deg, #FFE4E1 0%, #FFF8DC 100%);
  line-height: 1.6;
}

.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

/* Header with gradient and sticky navigation */
.header {
  background: linear-gradient(45deg, #DC143C, #FF6347, #FFD700);
  color: white;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.header-content {
  display: flex;
  justify-content: between;
  align-items: center;
  padding: 15px 0;
}

.logo {
  font-size: 1.8rem;
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.tagline {
  font-size: 1rem;
  margin-left: 10px;
  opacity: 0.9;
}

.header-actions {
  display: flex;
  gap: 20px;
  align-items: center;
}

.search-box {
  position: relative;
  display: flex;
  align-items: center;
}

.search-box input {
  padding: 10px 40px 10px 15px;
  border: none;
  border-radius: 25px;
  width: 300px;
  font-size: 14px;
}

.cart-btn {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  padding: 10px 15px;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
  transition: all 0.3s;
}

.cart-btn:hover {
  background: rgba(255,255,255,0.3);
}

.cart-count {
  position: absolute;
  top: -5px;
  right: -5px;
  background: #FF4444;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Contact info bar */
.contact-bar {
  background: rgba(0,0,0,0.1);
  padding: 8px 0;
  text-align: center;
  font-size: 14px;
}

.contact-info {
  display: flex;
  justify-content: center;
  gap: 30px;
  flex-wrap: wrap;
}

.contact-info span {
  display: flex;
  align-items: center;
  gap: 5px;
}

/* Category tabs */
.category-tabs {
  background: white;
  padding: 20px 0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.tabs-container {
  display: flex;
  justify-content: center;
  gap: 10px;
  flex-wrap: wrap;
}

.tab-btn {
  background: transparent;
  border: 2px solid #DC143C;
  color: #DC143C;
  padding: 10px 20px;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 600;
}

.tab-btn.active, .tab-btn:hover {
  background: #DC143C;
  color: white;
}

/* Special offers section */
.offers-section {
  padding: 30px 0;
  background: linear-gradient(45deg, #FFD700, #FFA500);
  text-align: center;
  margin-bottom: 30px;
}

.offers-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.offer-card {
  background: rgba(255,255,255,0.9);
  padding: 20px;
  border-radius: 15px;
  border: 2px dashed #DC143C;
}

/* Products grid */
.products-section {
  padding: 40px 0;
}

.section-title {
  text-align: center;
  font-size: 2.5rem;
  color: #DC143C;
  margin-bottom: 40px;
}

.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
}

.product-card {
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
  position: relative;
}

.product-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
}

.product-image {
  width: 100%;
  height: 200px;
  background: linear-gradient(45deg, #DC143C, #FF6347);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 4rem;
  color: white;
  position: relative;
}

.popular-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #FF4444;
  color: white;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 12px;
  font-weight: 600;
}

.product-info {
  padding: 20px;
}

.product-name {
  font-size: 1.3rem;
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
}

.product-description {
  color: #666;
  font-size: 14px;
  margin-bottom: 15px;
  line-height: 1.5;
}

.price-section {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 15px;
}

.price-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.original-price {
  text-decoration: line-through;
  color: #999;
  font-size: 14px;
}

.offer-price {
  font-size: 1.4rem;
  font-weight: 700;
  color: #DC143C;
}

.discount-badge {
  background: #00AA00;
  color: white;
  padding: 2px 6px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
}

.rating {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 14px;
  color: #666;
  margin-bottom: 15px;
}

.stars {
  color: #FFD700;
}

.add-to-cart-btn {
  width: 100%;
  background: linear-gradient(45deg, #25D366, #20B858);
  color: white;
  border: none;
  padding: 12px;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.add-to-cart-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
}

/* Cart sidebar */
.cart-sidebar {
  position: fixed;
  top: 0;
  right: -400px;
  width: 400px;
  height: 100vh;
  background: white;
  z-index: 200;
  transition: right 0.3s ease;
  overflow-y: auto;
  box-shadow: -5px 0 25px rgba(0,0,0,0.2);
}

.cart-sidebar.open {
  right: 0;
}

.cart-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.5);
  z-index: 150;
  display: none;
}

.cart-overlay.active {
  display: block;
}

.cart-header {
  background: linear-gradient(45deg, #DC143C, #FF6347);
  color: white;
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.close-cart {
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
}

.cart-items {
  padding: 20px;
}

.cart-item {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 15px 0;
  border-bottom: 1px solid #eee;
}

.cart-item-info {
  flex: 1;
}

.item-name {
  font-weight: 600;
  margin-bottom: 5px;
}

.item-price {
  color: #DC143C;
  font-weight: 600;
}

.quantity-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}

.qty-btn {
  background: #DC143C;
  color: white;
  border: none;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cart-total {
  background: #f8f8f8;
  padding: 20px;
  border-top: 2px solid #eee;
}

.total-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  font-size: 18px;
  font-weight: 600;
}

.checkout-btn {
  width: 100%;
  background: linear-gradient(45deg, #25D366, #20B858);
  color: white;
  border: none;
  padding: 15px;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 15px;
}

/* Checkout Modal */
.checkout-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 300;
}

.checkout-modal.active {
  display: flex;
}

.checkout-content {
  background: white;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  border-radius: 20px;
  overflow-y: auto;
}

.checkout-header {
  background: linear-gradient(45deg, #00AA00, #008800);
  color: white;
  padding: 20px;
  border-radius: 20px 20px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.checkout-body {
  padding: 30px;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: 600;
  color: #333;
}

.form-control {
  width: 100%;
  padding: 12px;
  border: 2px solid #ddd;
  border-radius: 10px;
  font-size: 16px;
  transition: border-color 0.3s;
}

.form-control:focus {
  outline: none;
  border-color: #00AA00;
}

.order-type-selection {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

.order-type-btn {
  padding: 15px;
  border: 2px solid #ddd;
  border-radius: 10px;
  background: white;
  cursor: pointer;
  text-align: center;
  transition: all 0.3s;
}

.order-type-btn.active {
  border-color: #00AA00;
  background: #f0fff0;
}

.order-summary {
  background: #f8f8f8;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
}

.whatsapp-btn {
  width: 100%;
  background: linear-gradient(45deg, #25D366, #20B858);
  color: white;
  border: none;
  padding: 15px;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

/* Floating WhatsApp */
.floating-whatsapp {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #25D366;
  color: white;
  border-radius: 50px;
  padding: 15px 20px;
  text-decoration: none;
  box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);
  z-index: 100;
  animation: pulse 2s infinite;
  display: flex;
  align-items: center;
  gap: 10px;
}

@keyframes pulse {
  0% { box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4); }
  50% { box-shadow: 0 4px 30px rgba(37, 211, 102, 0.8); }
  100% { box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4); }
}

/* Notification */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #00AA00;
  color: white;
  padding: 15px 20px;
  border-radius: 10px;
  z-index: 400;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.3s;
}

.notification.show {
  opacity: 1;
  transform: translateX(0);
}

.notification.error {
  background: #FF4444;
}

/* Responsive Design */
@media (max-width: 768px) {
  .header-content {
    flex-direction: column;
    gap: 15px;
  }

  .search-box input {
    width: 100%;
  }

  .cart-sidebar {
    width: 100%;
    right: -100%;
  }

  .products-grid {
    grid-template-columns: 1fr;
  }

  .offers-grid {
    grid-template-columns: 1fr;
  }

  .contact-info {
    gap: 15px;
    font-size: 12px;
  }

  .section-title {
    font-size: 2rem;
  }
}
</style> -->
</head>
<body>
<!-- Notification -->
<div id="notification" class="notification">
  <span id="notification-text"></span>
</div>

<!-- Cart Overlay -->
<div id="cart-overlay" class="cart-overlay" onclick="closeCart()"></div>

<!-- Header -->
<header class="header">
  <div class="contact-bar">
    <div class="container">
      <div class="contact-info">
        <span>📞 6375883921, 9983848288</span>
        <span>📍 रेजगांहर चौक, रायपुर (छ.ग.)</span>
        <span>🕐 दैनिक 8:00 AM - 9:00 PM</span>
        <span>🚚 ₹500+ पर फ्री डिलीवरी</span>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="header-content">
      <div>
        <div class="logo">मां बीकानेरी बेकरी</div>
        <div class="tagline">स्वाद वो जो आपका मन चाहे </div>
      </div>

      <div class="header-actions">
        <div class="search-box">
          <input type="text" id="search-input" placeholder="मिठाई, नमकीन, बेकरी आइटम्स खोजें..." />
        </div>
        <button class="cart-btn" onclick="openCart()">
          🛒 Cart
          <span id="cart-count" class="cart-count" style="display: none;">0</span>
        </button>
      </div>
    </div>
  </div>
</header>

<!-- Category Tabs -->
<section class="category-tabs">
  <div class="container">
    <div class="tabs-container">
      <button class="tab-btn active" onclick="filterCategory('all')">सभी</button>
      <button class="tab-btn" onclick="filterCategory('mithai')">स्पेशल मिठाइयां</button>
      <button class="tab-btn" onclick="filterCategory('namkeen')">स्पेशल नमकीन</button>
      <button class="tab-btn" onclick="filterCategory('bakery')">बेकरी आइटम्स</button>
      <button class="tab-btn" onclick="filterCategory('special')">स्पेशल ऑर्डर</button>
    </div>
  </div>
</section>

<!-- Special Offers -->
<section class="offers-section">
  <div class="container">
    <h2 style="font-size: 2rem; margin-bottom: 10px; color: #8B0000;">🎉 आज के स्पेशल ऑफर 🎉</h2>
    <div class="offers-grid">
      <div class="offer-card">
        <strong>Festival Special:</strong> 1 kg मिठाई खरीदें, 200g रसगुल्ला फ्री!
      </div>
      <div class="offer-card">
        <strong>Bulk Order:</strong> 2kg+ ऑर्डर पर 10% डिस्काउंट
      </div>
      <div class="offer-card">
        <strong>Home Delivery:</strong> ₹500+ ऑर्डर पर फ्री डिलीवरी
      </div>
    </div>
  </div>
</section>

<!-- Products Section -->
<section class="products-section">
  <div class="container">
    <h2 class="section-title">हमारे स्पेशल प्रोडक्ट्स</h2>
    <div id="products-grid" class="products-grid">
      <!-- Products will be loaded here by JavaScript -->
    </div>
  </div>
</section>

<!-- Cart Sidebar -->
<div id="cart-sidebar" class="cart-sidebar">
  <div class="cart-header">
    <h3>Your Cart</h3>
    <button class="close-cart" onclick="closeCart()">×</button>
  </div>
  <div id="cart-items" class="cart-items">
    <p style="text-align: center; color: #666; padding: 20px;">Your cart is empty</p>
  </div>
  <div id="cart-footer" class="cart-total" style="display: none;">
    <div class="total-row">
      <span>Subtotal:</span>
      <span id="cart-subtotal">₹0</span>
    </div>
    <div class="total-row" id="delivery-row" style="display: none;">
      <span>Delivery:</span>
      <span id="delivery-fee">₹50</span>
    </div>
    <div class="total-row" style="border-top: 2px solid #ddd; padding-top: 10px;">
      <span>Total:</span>
      <span id="cart-total">₹0</span>
    </div>
    <button class="checkout-btn" onclick="openCheckout()">Proceed to Checkout</button>
  </div>
</div>

<!-- Checkout Modal -->
<div id="checkout-modal" class="checkout-modal">
  <div class="checkout-content">
    <div class="checkout-header">
      <h3>Complete Your Order</h3>
      <button class="close-cart" onclick="closeCheckout()">×</button>
    </div>
    <div class="checkout-body">
      <div class="order-type-selection">
        <button class="order-type-btn active" id="delivery-btn" onclick="selectOrderType('delivery')">
          <div style="font-size: 2rem; margin-bottom: 10px;">🚚</div>
          <div><strong>Home Delivery</strong></div>
          <div style="font-size: 12px; color: #666;">45-60 mins</div>
        </button>
        <button class="order-type-btn" id="pickup-btn" onclick="selectOrderType('pickup')">
          <div style="font-size: 2rem; margin-bottom: 10px;">🏪</div>
          <div><strong>Store Pickup</strong></div>
          <div style="font-size: 12px; color: #666;">20-30 mins</div>
        </button>
      </div>

      <div class="form-group">
        <label for="customer-name">नाम *</label>
        <input type="text" id="customer-name" class="form-control" required>
      </div>

      <div class="form-group">
        <label for="customer-phone">फोन नंबर *</label>
        <input type="tel" id="customer-phone" class="form-control" required>
      </div>

      <div class="form-group">
        <label for="customer-email">ईमेल (ऑप्शनल)</label>
        <input type="email" id="customer-email" class="form-control">
      </div>

      <div class="form-group" id="address-group">
        <label for="customer-address">डिलीवरी एड्रेस *</label>
        <textarea id="customer-address" class="form-control" rows="3" placeholder="पूरा पता लिखें..."></textarea>
      </div>

      <div class="order-summary">
        <h4 style="margin-bottom: 15px;">Order Summary</h4>
        <div id="checkout-items"></div>
        <hr style="margin: 15px 0;">
        <div style="display: flex; justify-content: space-between; font-weight: 600; font-size: 18px;">
          <span>Total:</span>
          <span id="checkout-total">₹0</span>
        </div>
      </div>

      <button class="whatsapp-btn" onclick="sendWhatsAppOrder()">
        📱 WhatsApp पर ऑर्डर करें
      </button>
    </div>
  </div>
</div>

<!-- Floating WhatsApp -->
<a href="https://wa.me/916375883921?text=नमस्ते%20मां%20बीकानेरी%20बेकरी!%20मुझे%20जानकारी%20चाहिए।" class="floating-whatsapp" target="_blank">
  📱 WhatsApp
</a>

<script>
// Product data
const products = [
  { id: 1, name: "रसगुल्ला", price: 200, offerPrice: 180, category: "mithai", emoji: "🍯", description: "मुंह में घुल जाने वाले स्वादिष्ट रसगुल्ले", popular: true, rating: 4.8 },
  { id: 2, name: "काजू कतली", price: 500, offerPrice: 450, category: "mithai", emoji: "🥜", description: "प्रीमियम काजू से बनी मिठाई", popular: true, rating: 4.9 },
  { id: 3, name: "गुलाब जामुन", price: 150, offerPrice: 135, category: "mithai", emoji: "🍬", description: "मुलायम और मीठे गुलाब जामुन", popular: true, rating: 4.7 },
  { id: 4, name: "मोतीचूर लड्डू", price: 280, offerPrice: 250, category: "mithai", emoji: "🟡", description: "पारंपरिक मोतीचूर लड्डू", popular: false, rating: 4.6 },
  { id: 5, name: "बर्फी", price: 320, offerPrice: 280, category: "mithai", emoji: "⬜", description: "विभिन्न प्रकार की बर्फी", popular: false, rating: 4.5 },
  { id: 6, name: "जलेबी", price: 180, offerPrice: 160, category: "mithai", emoji: "🌀", description: "कुरकुरी और मीठी जलेबी", popular: false, rating: 4.4 },

  { id: 7, name: "समोसा", price: 10, offerPrice: 8, category: "namkeen", emoji: "🥟", description: "कुरकुरे और स्वादिष्ट समोसे", popular: true, rating: 4.6 },
  { id: 8, name: "कचौड़ी", price: 8, offerPrice: 6, category: "namkeen", emoji: "🟤", description: "मसालेदार कचौड़ी", popular: true, rating: 4.5 },
  { id: 9, name: "मठरी", price: 140, offerPrice: 120, category: "namkeen", emoji: "🟫", description: "पारंपरिक मठरी", popular: false, rating: 4.3 },
  { id: 10, name: "चकली", price: 160, offerPrice: 140, category: "namkeen", emoji: "🌀", description: "कुरकुरी चकली", popular: false, rating: 4.4 },
  { id: 11, name: "सेव", price: 120, offerPrice: 100, category: "namkeen", emoji: "🟨", description: "बारीक सेव", popular: false, rating: 4.2 },
  { id: 12, name: "भुजिया", price: 130, offerPrice: 110, category: "namkeen", emoji: "🟡", description: "मसालेदार भुजिया", popular: false, rating: 4.3 },

  { id: 13, name: "चॉकलेट केक", price: 400, offerPrice: 350, category: "bakery", emoji: "🍰", description: "रिच चॉकलेट केक", popular: true, rating: 4.8 },
  { id: 14, name: "वनीला केक", price: 360, offerPrice: 320, category: "bakery", emoji: "🎂", description: "क्लासिक वनीला केक", popular: false, rating: 4.6 },
  { id: 15, name: "पेस्ट्री", price: 30, offerPrice: 25, category: "bakery", emoji: "🧁", description: "फ्रेश पेस्ट्री", popular: false, rating: 4.4 },
  { id: 16, name: "ब्रेड", price: 30, offerPrice: 25, category: "bakery", emoji: "🍞", description: "सॉफ्ट ब्रेड", popular: false, rating: 4.2 },
  { id: 17, name: "बिस्कुट", price: 100, offerPrice: 80, category: "bakery", emoji: "🍪", description: "क्रिस्पी बिस्कुट", popular: false, rating: 4.1 },
  { id: 18, name: "पाव", price: 25, offerPrice: 20, category: "bakery", emoji: "🥖", description: "सॉफ्ट पाव", popular: false, rating: 4.0 },

  { id: 19, name: "कस्टम केक", price: 1000, offerPrice: 900, category: "special", emoji: "🎯", description: "आपकी पसंद का कस्टम केक", popular: true, rating: 4.9 },
  { id: 20, name: "वेडिंग स्वीट्स", price: 2000, offerPrice: 1800, category: "special", emoji: "💒", description: "शादी के लिए स्पेशल स्वीट्स", popular: true, rating: 4.8 },
];

// App state
let cart = JSON.parse(localStorage.getItem('cart') || '[]');
let currentCategory = 'all';
let orderType = 'delivery';

// Initialize app
document.addEventListener('DOMContentLoaded', function() {
  displayProducts();
  updateCartUI();

  // Search functionality
  document.getElementById('search-input').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    displayProducts(searchTerm);
  });
});

// Display products
function displayProducts(searchTerm = '') {
  const grid = document.getElementById('products-grid');
  let filtered = products.filter(product => {
    const matchesCategory = currentCategory === 'all' || product.category === currentCategory;
    const matchesSearch = product.name.toLowerCase().includes(searchTerm);
    return matchesCategory && matchesSearch;
  });

  grid.innerHTML = filtered.map(product => `
    <div class="product-card">
      <div class="product-image">
        ${product.popular ? '<div class="popular-badge">Popular</div>' : ''}
        ${product.emoji}
      </div>
      <div class="product-info">
        <h3 class="product-name">${product.name}</h3>
        <p class="product-description">${product.description}</p>
        <div class="rating">
          <span class="stars">⭐</span>
          <span>${product.rating}</span>
          <span style="color: #999;">(150+ reviews)</span>
        </div>
        <div class="price-section">
          <div class="price-info">
            <span class="original-price">₹${product.price}</span>
            <span class="offer-price">₹${product.offerPrice}</span>
            <span class="discount-badge">${Math.round(((product.price - product.offerPrice) / product.price) * 100)}% OFF</span>
          </div>
        </div>
        <button class="add-to-cart-btn" onclick="addToCart(${product.id})">
          🛒 Add to Cart
        </button>
      </div>
    </div>
  `).join('');
}

// Category filtering
function filterCategory(category) {
  currentCategory = category;
  displayProducts();

  // Update active tab
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
}

// Cart functions
function addToCart(productId) {
  const product = products.find(p => p.id === productId);
  const existingItem = cart.find(item => item.id === productId);

  if (existingItem) {
    existingItem.qty += 1;
  } else {
    cart.push({ ...product, qty: 1 });
  }

  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartUI();
  showNotification(`${product.name} added to cart!`);
}

function removeFromCart(productId) {
  cart = cart.filter(item => item.id !== productId);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartUI();
  showNotification('Item removed from cart');
}

function updateQuantity(productId, change) {
  const item = cart.find(item => item.id === productId);
  if (item) {
    item.qty += change;
    if (item.qty <= 0) {
      removeFromCart(productId);
    } else {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartUI();
    }
  }
}

function updateCartUI() {
  const cartCount = cart.reduce((total, item) => total + item.qty, 0);
  const cartTotal = cart.reduce((total, item) => total + (item.offerPrice * item.qty), 0);

  // Update cart count
  const cartCountEl = document.getElementById('cart-count');
  if (cartCount > 0) {
    cartCountEl.textContent = cartCount;
    cartCountEl.style.display = 'flex';
  } else {
    cartCountEl.style.display = 'none';
  }

  // Update cart items
  const cartItemsEl = document.getElementById('cart-items');
  const cartFooterEl = document.getElementById('cart-footer');

  if (cart.length === 0) {
    cartItemsEl.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Your cart is empty</p>';
    cartFooterEl.style.display = 'none';
  } else {
    cartItemsEl.innerHTML = cart.map(item => `
      <div class="cart-item">
        <div style="font-size: 2rem;">${item.emoji}</div>
        <div class="cart-item-info">
          <div class="item-name">${item.name}</div>
          <div class="item-price">₹${item.offerPrice} × ${item.qty}</div>
        </div>
        <div class="quantity-controls">
          <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
          <span>${item.qty}</span>
          <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
        </div>
      </div>
    `).join('');

    const deliveryFee = orderType === 'delivery' && cartTotal < 500 ? 50 : 0;
    const finalTotal = cartTotal + deliveryFee;

    document.getElementById('cart-subtotal').textContent = `₹${cartTotal}`;
    document.getElementById('delivery-fee').textContent = `₹${deliveryFee}`;
    document.getElementById('cart-total').textContent = `₹${finalTotal}`;

    if (deliveryFee > 0) {
      document.getElementById('delivery-row').style.display = 'flex';
    } else {
      document.getElementById('delivery-row').style.display = 'none';
    }

    cartFooterEl.style.display = 'block';
  }
}

// Cart sidebar functions
function openCart() {
  document.getElementById('cart-sidebar').classList.add('open');
  document.getElementById('cart-overlay').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeCart() {
  document.getElementById('cart-sidebar').classList.remove('open');
  document.getElementById('cart-overlay').classList.remove('active');
  document.body.style.overflow = 'auto';
}

// Checkout functions
function openCheckout() {
  if (cart.length === 0) {
    showNotification('Your cart is empty!', 'error');
    return;
  }

  closeCart();
  document.getElementById('checkout-modal').classList.add('active');
  updateCheckoutSummary();
  document.body.style.overflow = 'hidden';
}

function closeCheckout() {
  document.getElementById('checkout-modal').classList.remove('active');
  document.body.style.overflow = 'auto';
}

function selectOrderType(type) {
  orderType = type;

  document.querySelectorAll('.order-type-btn').forEach(btn => btn.classList.remove('active'));
  document.getElementById(type + '-btn').classList.add('active');

  const addressGroup = document.getElementById('address-group');
  if (type === 'delivery') {
    addressGroup.style.display = 'block';
    document.getElementById('customer-address').required = true;
  } else {
    addressGroup.style.display = 'none';
    document.getElementById('customer-address').required = false;
  }

  updateCartUI();
  updateCheckoutSummary();
}

function updateCheckoutSummary() {
  const cartTotal = cart.reduce((total, item) => total + (item.offerPrice * item.qty), 0);
  const deliveryFee = orderType === 'delivery' && cartTotal < 500 ? 50 : 0;
  const finalTotal = cartTotal + deliveryFee;

  const checkoutItems = document.getElementById('checkout-items');
  checkoutItems.innerHTML = cart.map(item => `
    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
      <span>${item.name} × ${item.qty}</span>
      <span>₹${item.offerPrice * item.qty}</span>
    </div>
  `).join('');

  if (deliveryFee > 0) {
    checkoutItems.innerHTML += `
      <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #666;">
        <span>Delivery Fee</span>
        <span>₹${deliveryFee}</span>
      </div>
    `;
  }

  document.getElementById('checkout-total').textContent = `₹${finalTotal}`;
}

function sendWhatsAppOrder() {
  const name = document.getElementById('customer-name').value;
  const phone = document.getElementById('customer-phone').value;
  const email = document.getElementById('customer-email').value;
  const address = document.getElementById('customer-address').value;

  if (!name || !phone) {
    showNotification('कृपया नाम और फोन नंबर भरें', 'error');
    return;
  }

  if (orderType === 'delivery' && !address) {
    showNotification('कृपया डिलीवरी एड्रेस भरें', 'error');
    return;
  }

  const cartTotal = cart.reduce((total, item) => total + (item.offerPrice * item.qty), 0);
  const deliveryFee = orderType === 'delivery' && cartTotal < 500 ? 50 : 0;
  const finalTotal = cartTotal + deliveryFee;

  let message = `🛍️ नया ऑर्डर - मां बीकानेरी बेकरी%0A%0A`;
  message += `📋 ऑर्डर डिटेल्स:%0A`;

  cart.forEach(item => {
    message += `• ${item.name} × ${item.qty} = ₹${item.offerPrice * item.qty}%0A`;
  });

  message += `%0A💰 बिल:%0A`;
  message += `Subtotal: ₹${cartTotal}%0A`;
  if (deliveryFee > 0) message += `Delivery: ₹${deliveryFee}%0A`;
  message += `*Total: ₹${finalTotal}*%0A%0A`;

  message += `👤 कस्टमर जानकारी:%0A`;
  message += `नाम: ${name}%0A`;
  message += `फोन: ${phone}%0A`;
  if (email) message += `ईमेल: ${email}%0A`;

  message += `📦 ऑर्डर टाइप: ${orderType === 'delivery' ? '🚚 Home Delivery' : '🏪 Store Pickup'}%0A`;
  if (orderType === 'delivery') {
    message += `📍 एड्रेस: ${address}%0A`;
  }

  message += `%0A🙏 धन्यवाद! हम जल्दी आपसे संपर्क करेंगे।`;

  const whatsappUrl = `https://wa.me/916375883921?text=${message}`;
  window.open(whatsappUrl, '_blank');

  // Reset form and cart
  cart = [];
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartUI();
  closeCheckout();

  document.getElementById('customer-name').value = '';
  document.getElementById('customer-phone').value = '';
  document.getElementById('customer-email').value = '';
  document.getElementById('customer-address').value = '';

  showNotification('ऑर्डर सफलतापूर्वक भेजा गया! हम जल्दी संपर्क करेंगे।');
}

// Notification function
function showNotification(message, type = 'success') {
  const notification = document.getElementById('notification');
  const notificationText = document.getElementById('notification-text');

  notificationText.textContent = message;
  notification.className = `notification ${type} show`;

  setTimeout(() => {
    notification.classList.remove('show');
  }, 3000);
}

// Close modals when clicking outside
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('checkout-modal')) {
    closeCheckout();
  }
});
</script>
</body>
</html>